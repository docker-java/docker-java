sudo: required
dist: xenial
language: java

services:
  - docker

jdk:
 - openjdk8

install: true

env:
  global:
    - DOCKER_TLS_VERIFY=""

  matrix:
    - DEPLOY=true

    # TCP transport
    - DOCKER_HOST="tcp://127.0.0.1:2375"

    # Older versions of Docker
    - DOCKER_VERSION="17.06.2~ce-0~ubuntu"
    - DOCKER_VERSION="18.06.3~ce~3-0~ubuntu"

#    - DOCKER_VERSION="1.13.1-0~ubuntu-trusty"

    # Swarm
    - DOCKER_HOST="tcp://127.0.0.1:2377" SWARM_VERSION="1.2.8"

#    - repo="main" DOCKER_HOST="tcp://127.0.0.1:2375" DOCKER_VERSION="1.11.2-0~trusty"
#    - repo="main" DOCKER_HOST="unix:///var/run/docker.sock" DOCKER_VERSION="1.11.2-0~trusty"
#    - repo="main" DOCKER_HOST="tcp://127.0.0.1:2375" DOCKER_VERSION="1.10.3-0~trusty"
#    - repo="main" DOCKER_HOST="unix:///var/run/docker.sock" DOCKER_VERSION="1.10.3-0~trusty"
#    - repo="testing" DOCKER_HOST="tcp://127.0.0.1:2375"
#    - repo="testing" DOCKER_HOST="unix:///var/run/docker.sock"
#    - repo="experimental" DOCKER_HOST="tcp://127.0.0.1:2375"
#    - repo="experimental" DOCKER_HOST="unix:///var/run/docker.sock"

cache:
  directories:
  - $HOME/.travis_cache
  - $HOME/.m2 # install will pollute it

before_install:
  - ./.travis/travis-before-install.sh

script:
  - mvn verify
